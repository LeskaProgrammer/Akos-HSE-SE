// shared.h — общие определения для клиента и сервера (Windows-версия)

#pragma once

// Имена объектов ОС. Это просто строки, по которым
// процессы найдут один и тот же объект.
#define SHM_NAME        "akos7_shm_Simonov"

// Семафор "место свободно":
//   1  — буфер пуст, клиент может записывать число;
//   0  — буфер занят, клиент ждёт.
#define SEM_SPACE_NAME  "akos7_sem_space_Simonov"

// Семафор "данные готовы":
//   1  — в буфере лежит новое число, сервер может читать;
//   0  — данных нет, сервер ждёт.
#define SEM_DATA_NAME   "akos7_sem_data_Simonov"

// Структура, которая живёт целиком в разделяемой памяти.
// Её одновременно видят и сервер, и клиент.
struct Shared {
    int stop;   // флаг остановки: 1 ⇒ оба процесса должны завершиться
    int value;  // одно целое число, передаваемое от клиента к серверу
};
